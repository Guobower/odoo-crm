<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

    <record id="view_product_category_form" model="ir.ui.view">
        <field name="name">product.category.form.3p.inherit</field>
        <field name="model">product.category</field>
        <field name="inherit_id" ref="product.product_category_form_view"/>
        <field name="arch" type="xml">
            <field name="type" position="after">
                <field name="repord_3p_supplier"/>
            </field>
        </field>
    </record>

    <record id="view_partner_form" model="ir.ui.view">
        <field name="name">res.partner.form</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <field name="website" position="after">
                <field name="product_ids" widget="many2many_tags"/>
                <field name="inactive_product_ids" widget="many2many_tags"/>
                <field name="listing_ids" widget="many2many_tags"/>
                <field name="repord_3p_supplier" groups="base.group_sale_manager"/>
            </field>
        </field>
    </record>

    <record id="view_partner_listing_form" model="ir.ui.view">
        <field name="name">res.partner.listing.form</field>
        <field name="model">res.partner.listing</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Listing">
                <sheet>
                    <div class="oe_title" style="width: 420px;">
                        <label class="oe_edit_only" for="name" string="Listing Name"/>
                        <h1><field name="name" placeholder="ICA Kvantum" class="oe_inline"/></h1>
                    </div>
                    <group>
                        <field name="mandatory"/>
                        <field name="role"/>
                        <field name="rangebox"/>
                        <field name="product_ids" string="Products" widget="many2many_tags"/>
                    </group>

                </sheet>
            </form>
        </field>
    </record>

    <record id="view_partner_listing_tree" model="ir.ui.view">
        <field name="name">res.partner.listing.tree</field>
        <field name="model">res.partner.listing</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="product_ids"/>
            </tree>
        </field>
    </record>

    <record id="action_res_partner_listing" model="ir.actions.act_window">
        <field name="name">res.partner.listing.action</field>
        <field name="res_model">res.partner.listing</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="view_partner_listing_tree"/>
        <field name="context">{"search_default_current": 1}</field>
    </record>

    <menuitem id="menu_res_partner_listing" name="Partner Listing" parent="base.menu_product" sequence="30" action="action_res_partner_listing" groups="base.group_sale_salesman"/>

    <template id="mobile_order_view" name="Repord App">
        <t t-call="website.layout">
            <div id="wrap">
                <div class="oe_structure">
                    <t t-call="crm_repord.search_stores"/>
                    <div class="container" style="width: 100%; padding: 0px;">
                        <span t-field="partner.image" t-field-options="{&quot;widget&quot;: &quot;image&quot;, &quot;style&quot;:&quot;margin: auto; margin-top: 30px; max-height: 40px;&quot;}"/>
                        <p class="text-center mt4 mb4" style="font-size: 2.3em; font-weight: 300; color: #6a6a6a;" t-field="partner.name"/>
                        <!-- navigator -->
                        <div class="col-md-12 col-sm-12 col-xs-12" style="padding: 0px 10px;">
                            <ul class="nav nav-tabs nav-justified nav-brand text-center" style="padding: 0px; margin: 10px auto;">
                                <t t-foreach="product_categories" t-as="brand_categs">
                                    <li t-att-class="'active' if brand_categs.id == active_category else ''">
                                        <a href="#" data-toggle="tab" class="brand_tab" t-att-data-category-id="brand_categs.id" t-att-data-target="'&#35;categs_%s, #sortiment_list_%s' % (brand_categs.id, brand_categs.id)"><span t-field="brand_categs.name"/></a>
                                    </li>
                                </t>
                            </ul>
                        </div>
                        <div class="col-md-12 col-sm-12 col-xs-12" style="width: 100%; padding: 0px;">
                            <t t-if="not active_tab"><t t-set="active_tab" t-value="'1'"/></t>
                            <ul class="nav nav_tabs nav-justified nav-categ">
                                <li t-att-class="'active' if active_tab == '1' else ''">
                                    <a data-toggle="tab" href="#butiksorder" style="border-bottom-style: none;">Order</a>
                                </li>
                                <li t-att-class="'active' if active_tab == '2' else ''">
                                    <a data-toggle="tab" href="#kedjans_sortiment" style="border: 1px solid #CED2DB; border-top-style: none; border-right-style: none; border-bottom-style: none;">Sortiment</a>
                                </li>
                                <li t-att-class="'active' if active_tab == '3' else ''">
                                    <a data-toggle="tab" href="#kund_kort" style="border: 1px solid #CED2DB; border-top-style: none; border-right-style: none; border-bottom-style: none;">Kundkort</a>
                                </li>
                                <li t-att-class="'active' if active_tab == '4' else ''">
                                    <a data-toggle="tab" href="#bilder" style="border: 1px solid #CED2DB; border-top-style: none; border-right-style: none; border-bottom-style: none;">Bilder</a>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <!-- Order -->
                                <div id="butiksorder"/>

                                <!-- Chain sortiment -->
                                <div id="kedjans_sortiment"/>

                                <!-- customer card -->
                                <div id="kund_kort"/>

                                <!-- images -->
                                <div id="bilder"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <template id="butiksorder" inherit_id="mobile_order_view">
        <xpath expr="//div[@id='butiksorder']" position="replace">
            <div id="butiksorder" t-att-class="'tab-pane fade in %s col-xs-12 col-md-12 col-lg-12' %('active' if active_tab == '1' else '')" style="padding: 0px;">
                <div class="container">
                    <!-- content -->
                    <div class="tab-content">
                        <t t-foreach="product_categories" t-as="brand_categories">
                            <t t-set="brand_partner" t-value="brand_categories.repord_3p_supplier"/>
                            <t t-set="order" t-value="request.env['rep.order'].search([('partner_id', '=', partner.id), ('state', '=', 'draft'), ('third_party_supplier', '=', brand_partner and brand_partner.id or False)])"/>
                            <div t-att-class="'tab-pane fade in active col-xs-12 col-md-12 col-lg-12' if brand_categories == product_categories[0] else 'tab-pane fade in col-xs-12 col-md-12 col-lg-12'"
                            t-att-id="'categs_%s' %brand_categories.id" style="padding: 0px;">
                                <t t-if="not order">
                                    <a t-att-href="'/crm/%s/create_repord/%s' %(partner.id, brand_partner.id if brand_partner else '')" type="button" class="btn btn-warning btn-lg col-xs-6 col-sm-6 col-xs-offset-3 col-sm-offset-3">Skapa order</a>
                                </t>
                                <t t-if="order">
                                    <!-- selection for product category -->
                                    <div class="form-group">
                                        <div class="col-md-12 col-sm-12 col-xs-12" style="margin: 10px 0px; padding: 0px 10px;">
                                            <select name="" id="product_tab" class="form-control selectpicker dropdown selection_dropdown" data-style="btn-primary" onchange="product_tab()">
                                                <t t-set="brand_categs" t-value="request.env['product.category'].search([('parent_id', '=', brand_categories.id)])"/>
                                                <t t-if="len(brand_categs) &gt; 0" t-foreach="brand_categs" t-as="b_c">
                                                    <option data-toggle="tab" style="padding: 5px;" t-att-href="'&#35;product_categ_%s' %b_c.id" t-att-value="'product_categ_%s' %b_c.id"><span t-field="b_c.name" style="color: #FFA62B;"/></option>
                                                </t>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="tab-content">
                                        <t t-set="brand_categs" t-value="request.env['product.category'].search([('parent_id', '=', brand_categories.id)])"/>
                                        <t t-if="len(brand_categs) &gt; 0" t-foreach="brand_categs" t-as="b_c">
                                            <div t-att-class="'tab-pane product_tab fade col-xs-12 col-md-12 col-lg-12 active in'
                                                if b_c == brand_categs[0] else
                                                'tab-pane product_tab fade col-xs-12 col-sm-12 col-md-12 col-lg-12'"
                                                t-att-id="'product_categ_%s' %b_c.id" style="padding: 0px;">
                                                <t t-foreach="b_c" t-as="p_c">
                                                    <table class="table table-striped" style="">
                                                        <tbody>
                                                            <t t-foreach="products" t-as="p">
                                                                <t t-if="p.categ_id in p_c">
                                                                    <tr t-att-class="'%s' % (('oe-extra-product%s' % (' hidden' if order.order_type in ['order', '3rd_party'] else '')) if not partner.is_product_active(p) else '')">
                                                                    <t t-set="order_line_qty" t-value="0"/>
                                                                    <t t-set="order_line_discount" t-value="0"/>
                                                                    <t t-foreach="order.order_line" t-as="ol">
                                                                        <t t-if="ol.product_id.id == p.id">
                                                                            <t t-set="order_line_qty" t-value="ol.product_uom_qty"/>
                                                                            <t t-set="order_line_discount" t-value="ol.discount"/>
                                                                        </t>
                                                                    </t>
                                                                    <td class="col-xs-12 col-sm-12 col-md-12">
                                                                        <div class="mb16">
                                                                            <div class="">
                                                                                <h5 class="text-center mt4 mb4" t-field="p.default_code"/>
                                                                            </div>
                                                                            <div class="text-center cutable" style="max-width: 320px;">
                                                                                <span class="mt4 mb4 product_name" t-att-onclick="'toggle_cell(&quot;%s&quot;)' %p.id" t-field="p.name"/>
                                                                            </div>
                                                                            <div class="">
                                                                                <h5 class="text-center mt4 mb16">Kvantitet / <t t-esc="p.uom_id.name"/></h5>
                                                                            </div>
                                                                            <div class="input-group oe_website_spinner" style="margin: auto;">
                                                                                <span class="input-group-addon quantity-button float_left" style="margin: 0px 3px;" t-att-onclick="'plus(&quot;%s_qty_%s&quot;); send_rep_order(&quot;%s&quot;, &quot;%s&quot;)' %(partner.id, p.id, partner.id, p.id)">
                                                                                    <i class="fa fa-plus" style="width: 30px;"/>
                                                                                </span>
                                                                                <!-- <span class="input-group-addon">Quantity: </span> -->
                                                                                <input class="form-control input-style" style="width: 100px; margin: 0px 3px;" data-min="0" t-att-id="'%s_qty_%s' %(partner.id, p.id)" t-att-onchange="'send_rep_order(&quot;%s&quot;, &quot;%s&quot;)' %(partner.id, p.id)" name="add_qty" t-att-value="'0' if order_line_qty == 0.0 else order_line_qty" type="number"/>
                                                                                <!-- <span class="input-group-addon"><t t-esc="p.uom_id.name"/></span> -->
                                                                                <span class="input-group-addon quantity-button" t-att-onclick="'minus(&quot;%s_qty_%s&quot;); send_rep_order(&quot;%s&quot;, &quot;%s&quot;)' %(partner.id, p.id, partner.id, p.id)">
                                                                                    <i class="fa fa-minus" style="width: 30px;"/>
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                        <div class="table_cell" t-att-id="'product_cell_%s' %p.id">
                                                                            <div class="col-xs-12 col-md-12 input-group oe_website_spinner" style="margin: auto;">
                                                                                <span class="input-group-addon float_left" style="background-color: #9e9e9e; color: #fff;" t-att-onclick="'plus(&quot;%s_discount_%s&quot;); send_rep_order(&quot;%s&quot;, &quot;%s&quot;)' %(partner.id, p.id, partner.id, p.id)">
                                                                                    <i class="fa fa-plus"/>
                                                                                </span>
                                                                                <span class="input-group-addon" style="">Rabatt: </span>
                                                                                <input class="form-control" style="width: 100px;" data-min="0" t-att-id="'%s_discount_%s' %(partner.id, p.id)" t-att-onchange="'send_rep_order(&quot;%s&quot;, &quot;%s&quot;)' %(partner.id, p.id)" name="discount" t-att-value="'0' if order_line_discount == 0.0 else order_line_discount" type="number"/>
                                                                                <span class="input-group-addon" style="">%</span>
                                                                                <span class="input-group-addon" style="background-color: #9e9e9e; color: #fff;" t-att-onclick="'minus(&quot;%s_discount_%s&quot;); send_rep_order(&quot;%s&quot;, &quot;%s&quot;)' %(partner.id, p.id, partner.id, p.id)">
                                                                                    <i class="fa fa-minus"/>
                                                                                </span>
                                                                            </div>
                                                                            <ul class="mt16 text-center" style="list-style-type: none; padding: 0px;">
                                                                                <li>KFP: <span t-field="p.weight"/></li>
                                                                                <t t-set="packaging_id" t-value="p.packaging_ids and p.packaging_ids[0]"/>
                                                                                <t t-if="packaging_id">
                                                                                    <li>DFP: <span t-field="packaging_id.qty"/></li>
                                                                                    <li>PALL: <span t-field="packaging_id.ul_qty"/></li>
                                                                                </t>
                                                                                    <li>NR: <span t-esc="p.get_store_code(partner.id)"/></li>
                                                                            </ul>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                </t>
                                                            </t>
                                                        </tbody>
                                                    </table>
                                                </t>
                                            </div>
                                        </t>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-md-12 col-sm-12 col-xs-12" style="margin-bottom: 10px; padding: 0px 10px;">
                                            <select name="order_type" id="order_type" class="form-control selectpicker dropdown selection_dropdown" data-style="btn-primary" t-att-onchange="'change_order_type(&quot;%s&quot;)' %order.id">
                                                <t t-foreach="request.env['rep.order'].fields_get(['order_type'])['order_type']['selection']" t-as="order_type">
                                                    <option t-if="(not brand_categories.repord_3p_supplier and order_type[0] != '3rd_party') or (brand_categories.repord_3p_supplier and order_type[0] != 'order')" t-att-value="order_type[0]" t-att="{'selected': 'checked'} if order_type[0] == order.order_type else {}"><t t-raw="order_type[1]"/></option>
                                                </t>
                                            </select>
                                        </div>
                                        <div class="col-md-12 col-sm-12 col-xs-12" style="margin-bottom: 10px; padding: 0px 10px;">
                                            <select name="campaign" id="campaign" class="form-control selectpicker dropdown selection_dropdown" data-style="btn-primary" t-att-onchange="'change_campaign(&quot;%s&quot;)' %order.id">
                                                <option value="">Kampanj</option>
                                                <t t-foreach="request.env['crm.lead'].search([('partner_id', '=', partner.id)])" t-as="aa">
                                                    <option t-if="aa.campaign" t-att-value="aa.campaign.id"><t t-raw="aa.campaign.name"/></option>
                                                </t>
                                            </select>
                                        </div>
                                        <div class="input-group col-md-12 col-sm-12 col-xs-12" style="margin-bottom: 10px; padding: 0px 10px;">
                                            <input id="delivery_date" t-att-value="order.date_order and order.date_order[:10]" type="date" name="Delivery Date" class="form-control selection_dropdown" data-style="btn-primary" t-att-onchange="'change_delivery_date(&quot;%s&quot;)' %order.id" placeholder="Leveransdatum"/>
                                            <span id="calendar-icon" class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                        </div>
                                        <div class="col-md-12 checkbox mb16 text-center">
                                            <label for="send_mail"><input name="send_mail" id="send_mail" value="send" type="checkbox"/>Kopia till epost</label>
                                        </div>
                                        <div class="col-md-12 mb32">
                                            <button id="confirm" name="confirm" style="margin: auto; display: block; background-color: #9e9e9e; color: #fff; padding: 12px 45px; font-size: 2.0em;" class="btn btn-lg" t-att-onclick="'order_confirm(&quot;%s&quot;)' %order.id">Skicka order</button>
                                            <h4 class="text-center" id="confirm_message"/>
                                            <button id="create_new" onclick="location.reload();" name="create_new" style="margin: auto; display: block; background-color: #9e9e9e; color: #fff; padding: 12px 45px; font-size: 2.0em;" class="btn btn-lg hidden" >Skapa ny order</button>
                                        </div>
                                    </div>
                                </t>
                            </div>
                        </t>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template id="kedjans_sortiment" inherit_id="mobile_order_view">
        <xpath expr="//div[@id='kedjans_sortiment']" position="replace">
            <div id="kedjans_sortiment" t-att-class="'tab-pane fade in %s col-xs-12 col-md-12 col-lg-12' %('active' if active_tab == '2' else '')" style="padding: 0px;">
                <div class="container" style="padding: 0px;">
                    <div class="tab-content">
                        <t t-foreach="product_categories" t-as="brand_category">
                            <div t-att-class="'tab-pane fade in active col-xs-12 col-md-12 col-lg-12' if brand_category == product_categories[0] else 'tab-pane fade in col-xs-12 col-md-12 col-lg-12'"
                            t-att-id="'sortiment_list_%s' %brand_category.id" style="padding: 0px;">
                                <t t-foreach="listings.get(brand_category.id, [])" t-as="pp">
                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt4 mb4 sort_products">
                                        <div t-att-id="'ksp_%s_minus' %pp.id" t-att-onclick="'remove_product(&quot;%s&quot;, &quot;%s&quot;)' %(partner.id, pp.id)" t-att-class="'hidden' if not partner.is_product_active(pp) else 'col-xs-3 col-sm-3 col-md-3 col-lg-3 pull-left product_minus'" t-att-style="'display: flex; justify-content: center; align-items: center; background-color: {}; height: 100%; color: #fff;'.format('#FF4F35' if pp in partner.m_range_product_ids else '#FAC134')">
                                            <i class="fa fa-minus" style="font-size: 3.3em;"/>
                                        </div>
                                        <div t-att-id="'ksp_%s_product' %pp.id" class="col-xs-9 col-sm-9 col-md-9 col-lg-9" style="height: 100%;">
                                            <img itemprop="image" class="img img-responsive" style="margin: auto; padding-top: 10px; max-height: 93px;" t-att-src="'/website/image/product.product/%s/image/150x150' %pp.id"/>
                                            <div class="text-center">
                                                <t t-if="pp.default_code">
                                                    <h6 t-esc="pp.default_code" class="mt16" style="margin-bottom: 0px;"/>
                                                </t>
                                                <div class="text-center cutable">
                                                    <span t-field="pp.product_tmpl_id" class="product_name" style="margin-top: 5px;"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div t-att-id="'ksp_%s_plus' %pp.id" t-att-onclick="'add_product(&quot;%s&quot;, &quot;%s&quot;)' %(partner.id, pp.id)" t-att-class="'hidden' if partner.is_product_active(pp) else 'col-xs-3 col-sm-3 col-md-3 col-lg-3 pull-right product_plus'" t-att-style="'display: flex; justify-content: center; align-items: center; background-color: {}; height: 100%; color: #fff;'.format('#FF4F35' if pp in partner.m_range_product_ids else '#FAC134')">
                                            <i class="fa fa-plus" style="font-size: 3.3em;"/>
                                        </div>
                                    </div>
                                </t>
                            </div>
                        </t>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template id="kund_kort" inherit_id="mobile_order_view">
        <xpath expr="//div[@id='kund_kort']" position="replace">
            <div id="kund_kort" t-att-class="'tab-pane fade in %s col-xs-12 col-md-12 col-lg-12' %('active' if active_tab == '3' else '')" style="padding: 0px;">
                <div class="row">
                    <!-- company information -->
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <h5 class="text-center mt32">Bolagsfakta</h5>
                        <h3 class="text-center mt8"><t t-esc="partner.name"/></h3>
                        <div class="container">
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                <table class="col-xs-12 col-sm-12 col-md-12 col-lg-12 customer_card_table">
                                    <tr>
                                        <td>Butikklass</td>
                                        <td><span t-if="partner.store_class" t-esc="partner.store_class" class="pull-right"/></td>
                                    </tr>
                                    <tr>
                                        <td>Omsättning</td>
                                        <td><span t-if="partner.size" t-esc="partner.size" class="pull-right"/></td>
                                    </tr>
                                    <tr>
                                        <td>Orgnr</td>
                                        <td><span t-if="partner.company_registry" class="pull-right"><t t-esc="partner.company_registry"/></span></td>
                                    </tr>
                                    <tr>
                                        <td>Epost</td>
                                        <td><a t-att-href="'mailto:%s' %partner.email" t-if="partner.email"><span t-esc="partner.email" class="pull-right"/></a></td>
                                    </tr>
                                    <tr>
                                        <td>Telefon</td>
                                        <td><a t-att-href="'tel:%s' %('+46{}'.format(str(partner.phone)[1:] if str(partner.phone).startswith('0') else partner.phone))" t-if="partner.phone"><span t-esc="partner.phone" class="pull-right"/></a></td>
                                    </tr>
                                    <tr>
                                        <td>Handlare</td>
                                        <td><span class="pull-right" t-esc="partner.child_ids.filtered(lambda c: c.function == 'Butikchef').name"/></td>
                                    </tr>
                                    <tr t-if="partner.rangebox">
                                        <td>Sortimentsbox</td>
                                        <td><span class="pull-right" t-esc="partner.rangebox"/></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt16 mb32 text-center">
                            <a t-att-href="'/crm/%s/company/edit' %partner.id" type="button" class="btn btn-warning btn-lg col-xs-6 col-sm-6 col-xs-offset-3 col-sm-offset-3">Redigera info</a>
                        </div>
                    </div>
                    <!-- contact persons -->
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <h3 class="text-center">Kontaktpersoner</h3>
                        <div class="container">
                            <div t-if="partner.child_ids" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                <table class="col-xs-12 col-sm-12 col-md-12 col-lg-12 customer_card_table">
                                    <t t-foreach="partner.child_ids" t-as="c">
                                        <tr>
                                            <td><strong><t t-esc="c.type.title()"/><t t-if="c.function"><t t-esc="' (%s)' %c.function"/></t></strong></td>
                                            <td/>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="pull-left"><a t-att-href="'/crm/%s/contact' %c.id"><t t-esc="c.name"/></a></span>
                                            </td>
                                            <td>
                                                <span t-if="c.phone" class="pull-right"><a t-att-href="'tel:%s' %('+46{}'.format(str(c.phone)[1:] if str(c.phone).startswith('0') else c.phone))"><t t-esc="c.phone"/></a></span>
                                                <span t-if="not c.phone and c.mobile" class="pull-right"><a t-att-href="'tel:%s' %('+46{}'.format(str(c.mobile)[1:] if str(c.mobile).startswith('0') else c.mobile))"><t t-esc="c.mobile"/></a></span>
                                            </td>
                                        </tr>
                                    </t>
                                </table>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt16 mb32 text-center">
                            <a t-att-href="'/crm/%s/contact/add' %partner.id" type="button" class="btn btn-warning btn-lg col-xs-6 col-sm-6 col-xs-offset-3 col-sm-offset-3">Lägga till</a>
                        </div>
                    </div>
                    <!-- partner opportunities -->
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <h3 class="text-center">Affärsmöjligheter</h3>
                        <t t-set="oppors" t-value="request.env['crm.lead'].sudo().search([('partner_id', '=', partner.id)])"/>
                        <div class="container">
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                <t t-if="oppors">
                                    <table id="oppor_table" class="col-xs-12 col-sm-12 col-md-12 col-lg-12 customer_card_table">
                                        <t t-foreach="oppors" t-as="oppor">
                                            <tr>
                                                <td>
                                                    <a t-att-href="'/crm/%s/lead/%s' %(partner.id, oppor.id)"><span t-field="oppor.name"/></a>
<!--
                                                    <span><t t-esc="'%.0d' %oppor.planned_revenue"/> <t t-esc="oppor.revenue_unit"/></span>
                                                    <span t-field="oppor.campaign"/>
                                                    <span t-if="oppor.campaign.account_id" t-field="oppor.campaign.account_id.name"/>
                                                    <span t-if="opp.description" t-field="opp.description"/>
-->
                                                </td>
                                            </tr>
                                        </t>
                                    </table>
                                </t>
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt16 mb32 text-center">
                                <a t-att-href="'/crm/%s/lead/add' %partner.id" type="button" class="btn btn-warning btn-lg col-xs-6 col-sm-6 col-xs-offset-3 col-sm-offset-3">Lägga till</a>
                            </div>
                        </div>
                    </div>
                    <!-- partner meeting -->
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <h3 class="text-center">Möten</h3>
                        <t t-set="meetings" t-value="partner.meeting_ids.filtered(lambda m: m.check_if_current(m)).sorted(lambda r: r.start)"/>
                        <div class="container">
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                <t t-if="meetings">
                                    <table id="meeting_table" class="col-xs-12 col-sm-12 col-md-12 col-lg-12 customer_card_table">
                                        <t t-foreach="meetings" t-as="meeting">
                                            <tr>
                                                <td>
                                                    <a t-att-href="'/crm/%s/meeting/%s' %(partner.id, meeting.id)"><span t-att-id="'meeting_%s_text' %meeting.id" t-esc="meeting.strip_desc()" class="pull-left meeting_text"/></a>
                                                </td>
                                                <td>
                                                    <t t-if="meeting.start_date">
                                                        <span t-field="meeting.start_date" class="pull-right" style="margin-top: 10px;"/>
                                                    </t>
                                                    <t t-if="meeting.start_datetime">
                                                        <span t-field="meeting.start_datetime" class="pull-right" style="margin-top: 10px;"/>
                                                    </t>
                                                </td>
                                            </tr>
                                        </t>
                                    </table>
                                </t>
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt16 mb32 text-center">
                                <a t-att-href="'/crm/%s/meeting/add' %partner.id" type="button" class="btn btn-warning btn-lg col-xs-6 col-sm-6 col-xs-offset-3 col-sm-offset-3">Skapa nytt</a>
<!--
                                <div id="meeting_button_group" class="hidden">
                                    <lable for="meeting_content">Beskrivning</lable>
                                    <input id="meeting_content" name="meeting_content" type="text" class="form-control input-xs mb16"/>
                                    <div class="form-group">
                                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" style="padding-left: 0px; padding-right: 0px;">
                                            <lable for="meeting_date">Datum</lable>
                                            <input id="meeting_date" name="meeting_date" type="date" class="form-control input-xs mb16"/>
                                        </div>
                                        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3" style="padding-right: 0px;">
                                            <label for="meeting_time_start" style="display: unset; font-weight: unset;">Starttid</label>
                                            <input id="meeting_time_start" name="meeting_time_start" class="form-control input-xs mb16" type="time"/>
                                        </div>
                                        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3" style="padding-right: 0px;">
                                            <label for="meeting_time_end" style="display: unset; font-weight: unset;">Sluttid</label>
                                            <input id="meeting_time_end" name="meeting_time_end" class="form-control input-xs mb16" type="time"/>
                                        </div>
                                    </div>
                                    <button class="btn btn-default btn-lg pull-left" onclick="hide_create_meeting()">Avbryt</button>
                                    <button class="btn btn-warning btn-lg pull-right" t-att-onclick="'create_meeting(&quot;%s&quot;)' %partner.id">Skapa</button>
                                </div>
-->
                            </div>
                        </div>
                    </div>
                    <!-- partner todo list -->
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <h3 class="text-center">Todo</h3>
                        <t t-set="notes" t-value="request.env['note.note'].search(['&amp;', '&amp;', ('partner_id', '=', partner.id), ('open', '=', True), ('stage_id', '!=', request.env.ref('note.note_stage_04').id)], order='due_date')"/>
                        <div class="container">
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                <t t-if="notes">
                                    <table id="todo_table" class="col-xs-12 col-sm-12 col-md-12 col-lg-12 customer_card_table">
                                        <t t-foreach="notes" t-as="note">
                                            <tr>
                                                <td>
                                                    <a t-att-href="'/crm/%s/note/%s' %(partner.id, note.id)"><span t-field="note.name" class="pull-left meeting_text"/></a>
<!--                                                    <p t-att-onclick="'todo_done(&quot;%s&quot;)' %note.id" t-att-id="'note_%s_text' %note.id" t-field="note.name" style="margin-top: 10px;"/>-->
                                                </td>
                                                <td>
                                                    <t t-if="note.due_date">
                                                        <span t-field="note.due_date" class="pull-right" style="margin-top: 10px;"/>
                                                    </t>
                                                </td>
                                            </tr>
                                        </t>
                                    </table>
                                </t>
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt16 mb32 text-center">
                                <a t-att-href="'/crm/%s/note/add' %partner.id" type="button" class="btn btn-warning btn-lg col-xs-6 col-sm-6 col-xs-offset-3 col-sm-offset-3">Skapa nytt</a>
<!--
                                <button id="show_note_button_group" class="btn btn-warning btn-lg" onclick="show_create_note()">Skapa nytt</button>
                                <div id="note_button_group" class="hidden">
                                    <input id="note_memo" name="memo" type="text" class="form-control input-xs mb16"/>
                                    <button class="btn btn-default btn-lg pull-left" onclick="hide_create_note()">Avbryt</button>
                                    <button class="btn btn-warning btn-lg pull-right" t-att-onclick="'create_note(&quot;%s&quot;)' %partner.id">Skapa</button>
                                </div>
-->
                            </div>
                        </div>
                    </div>
                </div>
                <!-- buttons for create log -->
                <div id="presentation_div" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <h3 class="text-center">Presentationer</h3>
                    <div class="container">
                        <button t-att-id="'%s_p_fa' %partner.id" t-att-onclick="'paolos_farsk(&quot;%s&quot;, &quot;Paolos Färsk&quot;)' %partner.id" class="btn btn-warning btn-lg mt16 mb16 col-xs-6 col-sm-6 col-xs-offset-3 col-sm-offset-3">Paolos Färsk</button>
                        <button t-att-id="'%s_p_fr' %partner.id" t-att-onclick="'paolos_frys(&quot;%s&quot;, &quot;Paolos Frys&quot;)' %partner.id" class="btn btn-warning btn-lg mt16 mb16 col-xs-6 col-sm-6 col-xs-offset-3 col-sm-offset-3">Paolos Frys</button>
                        <button t-att-id="'%s_l_fa' %partner.id" t-att-onclick="'leroy_farsk(&quot;%s&quot;, &quot;Leröy Färsk&quot;)' %partner.id" class="btn btn-primary btn-lg mt16 mb16 col-xs-6 col-sm-6 col-xs-offset-3 col-sm-offset-3">Lerøy</button>
                    </div>
                </div>
                <!-- buttons for mark meeting done -->
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center" style="background-color: #F8F8F8;">
                    <t t-if="len(partner._get_meeting()) &gt; 0">
                        <t t-set="meeting" t-value="partner._get_meeting()[0]"/>
                        <div t-if="request.env.ref('crm_repord.categ_meet6') not in meeting.categ_ids" class="mt16">
                            <a type="button" class="btn btn-success btn-lg mb16 col-xs-6 col-sm-6 col-xs-offset-3 col-sm-offset-3" t-att-href="'/crm/%s/meeting/visited' %partner.id" onclick="return confirm('Är du säker?')">Kunden besökt</a>
                        </div>
                    </t>
                </div>
            </div>
        </xpath>
    </template>

    <template id="bilder" inherit_id="mobile_order_view">
        <xpath expr="//div[@id='bilder']" position="replace">
            <div id="bilder" t-att-class="'tab-pane fade in %s col-xs-12 col-md-12 col-lg-12' %('active' if active_tab == '4' else '')" style="padding: 0px;">
                <div class="container">
                    <div class="row">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt32 mb32">
                            <form id="photo_form" t-att-action="'/crm/%s/image_upload' % partner.id" class="" method="post" enctype="multipart/form-data">
                                <input id="upload_file" type="file" name="ufile" accept="image/*" capture="camera" style="margin: auto;"/>
                            </form>
                        </div>
                        <div id="image_div" class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mb8">
                            <t t-set="attachments" t-value="request.env['ir.attachment'].search([('partner_id', '=', partner.id)])"/>
                            <t t-foreach="attachments" t-as="att">
                                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" style="padding: 8px;">
                                    <img itemprop="image" t-att-src="website.imagemagick_url(att, 'datas', 'crm_repord.product_image')" class="product_image">
                                        <i class="fa fa-trash-o product_image_delete" t-att-onclick="'delete_image(&quot;%s&quot;)' %att.id"/>
                                    </img>
                                </div>
                            </t>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template id="mystores" name="My Stores">
        <t t-call="website.layout">
            <div id="wrap">
                <div class="oe_structure">
                    <t t-call="crm_repord.search_stores"/>
                    <div class="container" style="width: 100%; padding: 20px; background-color: #fff;">
                        <t t-set="store_color" t-value="{'A': '#F00', 'B': '#FF7500', 'C': '#BBAA00', 'D': '#2CFF00', 'E': '#000BFF'}"/>
                        <h3 class="text-center">ICA</h3>
                        <div class="col-md-12 col-sm-12 mt8 mb8" t-foreach="my_icas" t-as="ms">
                            <span t-att-style="'background-color: %s; color: #fff; margin-right: 5px;' %(store_color[ms.store_class] if ms.store_class else '#fff')"><span t-field="ms.store_class" style="padding: 5px;"/></span>
                            <a t-att-href="'/crm/%s/repord' %ms.id"><span style="font-size: 1.5em;" t-field="ms.name"/>, <span t-field="ms.street"/> <span t-field="ms.city"/></a>
                        </div>
                        <h3 class="text-center">Coop</h3>
                        <div class="col-md-12 col-sm-12 mt8 mb8" t-foreach="my_coops" t-as="ms">
                            <span t-att-style="'background-color: %s; color: #fff; margin-right: 5px;' %(store_color[ms.store_class] if ms.store_class else '#fff')"><span t-field="ms.store_class" style="padding: 5px;"/></span>
                            <a t-att-href="'/crm/%s/repord' %ms.id"><span style="font-size: 1.5em;" t-field="ms.name"/>, <span t-field="ms.street"/> <span t-field="ms.city"/></a>
                        </div>
                        <h3 class="text-center">Axfood</h3>
                        <div class="col-md-12 col-sm-12 mt8 mb8" t-foreach="my_axfoods" t-as="ms">
                            <span t-att-style="'background-color: %s; color: #fff; margin-right: 5px;' %(store_color[ms.store_class] if ms.store_class else '#fff')"><span t-field="ms.store_class" style="padding: 5px;"/></span>
                            <a t-att-href="'/crm/%s/repord' %ms.id"><span style="font-size: 1.5em;" t-field="ms.name"/>, <span t-field="ms.street"/> <span t-field="ms.city"/></a>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <template id="search_result" name="Search Result">
        <t t-call="website.layout">
            <div id="wrap">
                <div class="oe_structure">
                    <t t-call="crm_repord.search_stores"/>
                    <div class="container" style="width: 100%; padding: 20px; background-color: #fff;">
                        <t t-set="store_color" t-value="{'A': '#F00', 'B': '#FF7500', 'C': '#BBAA00', 'D': '#2CFF00', 'E': '#000BFF'}"/>
                        <div class="col-md-12 col-sm-12 mt8 mb8" t-foreach="partners" t-as="p">
                            <span t-att-style="'background-color: %s; color: #fff; margin-right: 5px;' %(store_color[p.store_class] if p.store_class else '#fff')"><span t-field="p.store_class" style="padding: 5px;"/></span>
                            <a t-att-href="'/crm/%s/repord' %p.id"><span style="font-size: 1.5em;" t-field="p.name"/>, <span t-field="p.street"/> <span t-field="p.city"/></a>
                        </div>
                        <div t-if="len(partners) == 0" class="col-md-12 col-sm-12 mt8 mb8">
                            <p class="text-center">Ingen butik har hittat...</p>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <template id="search_stores" name="Search Stores">
        <div class="container" id="search_container">
            <div class="col-md-12 col-xs-12" style="padding: 0px;">
                <div class="col-md-2 col-xs-2 text-left">
                    <a href="/crm/mystores">
                        <span id="my_stores" class="pagination input-group-btn" style="margin: 8px 0px;">
                            <button class="btn btn-default" style="background-color: #535353; border-color: #535353; color: #a4a4a4; text-decoration: underline;"><strong>Mina butiker</strong></button>
                        </span>
                    </a>
                </div>
                <div class="col-md-6 col-xs-6">
                    <form action="/crm/search/stores" method="post" class="pagination form-inline" style="width: 100%; margin: 8px 0px;">
                        <div id="search_text" class="input-group">
                            <input type="text" name="search_words" t-att-value="search_words" class="search-query form-control" placeholder="Sök..."/>
                        </div>
                    </form>
                </div>
                <div class="col-md-4 col-xs-4 text-right">
                    <span class="input-group-btn text-right" style="height: 40px;">
                        <button id="search_button" class="btn btn-default" style="color: #a4a4a4;"><i class="fa fa-search"></i></button>
                        <button id="refresh_button" class="btn btn-default" style="color: #a4a4a4;" onclick="location.reload();"><i class="fa fa-refresh"></i></button>
                    </span>
                </div>
            </div>
        </div>
    </template>

    <!-- Company Information -->
    <template id="company_detail" name="Butik Information">
        <t t-call="website.layout">
            <t t-if="mode == 'edit'">
                <div class="container mt32 mb32">
                    <form method="post">
                        <div class="form-group">
                            <label for="store_class">Butikklass</label>
                            <select name="store_class" class="form-control selectpicker dropdown">
                                <t t-foreach="partner.fields_get(['store_class'])['store_class']['selection']" t-as="option">
                                    <option t-att-value="option[0]" t-att="{'selected': 'checked'} if option[0] == partner.read(['store_class'])[0]['store_class'] else {}"><t t-raw="option[1]"/></option>
                                </t>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="size">Omsättning</label>
                            <input name="size" type="number" class="form-control" t-att-value="partner.size" placeholder="Omsättning"/>
                        </div>
                        <div class="form-group">
                            <label for="email">Epost</label>
                            <input name="email" type="email" class="form-control" t-att-value="partner.email" placeholder="exempel@exempel.com"/>
                        </div>
                        <div class="form-group">
                            <label for="phone">Telefon</label>
                            <input name="phone" type="text" class="form-control" t-att-value="partner.phone" placeholder="0131234567"/>
                        </div>
                        <div class="container">
                            <a type="button" class="btn btn-default btn-lg mt32 mb32 pull-left" onclick="return window.history.back();">Avbryt</a>
                            <button class="btn btn-warning btn-lg mt32 mb32 pull-right" name="btn-save" value="btn-save" type="submit">Spara</button>
                        </div>
                    </form>
                </div>
            </t>
        </t>
    </template>

    <!-- View Contact Information-->
    <template id="contact_detail" name="Kontakt Information">
        <t t-call="website.layout">
            <t t-if="mode == 'view'">
                <div class="container mt32 mb32">
                    <table class="col-xs-12 col-sm-12 col-md-12 col-lg-12 customer_card_table">
                        <tr>
                            <td>Namn</td>
                            <td><span t-if="partner.name" t-esc="partner.name" class="pull-right"/></td>
                        </tr>
                        <tr>
                            <td>Epost</td>
                            <td><a t-att-href="'mailto:%s' %partner.email" t-if="partner.email"><span class="pull-right" t-esc="partner.email"/></a></td>
                        </tr>
                        <tr>
                            <td>Telefon</td>
                            <td><a t-att-href="'tel:%s' %('+46{}'.format(str(partner.phone)[1:] if str(partner.phone).startswith('0') else partner.phone))" t-if="partner.phone"><span class="pull-right" t-esc="partner.phone"/></a></td>
                        </tr>
                        <tr>
                            <td>Mobil</td>
                            <td><a t-att-href="'tel:%s' %('+46{}'.format(str(partner.mobile)[1:] if str(partner.mobile).startswith('0') else partner.mobile))" t-if="partner.mobile"><span class="pull-right" t-esc="partner.mobile"/></a></td>
                        </tr>
                        <tr>
                            <td>Tjänst</td>
                            <td><span class="pull-right" t-esc="partner.function"/></td>
                        </tr>
                    </table>
                    <div class="container crud_button_group">
                        <ul>
                            <li class="text-center"><a type="button" class="btn btn-default btn-lg mt32 mb32" onclick="return window.history.back();">Backa</a></li>
                            <t t-if="editable == 'enable'"><li class="text-center"><a type="button" class="btn btn-danger btn-lg mt32 mb32" t-att-href="'/crm/%s/contact/delete' %partner.id" onclick="return confirm('Är du säker?')">Ta bort</a></li></t>
                            <t t-if="editable == 'enable'"><li class="text-center"><a type="button" class="btn btn-warning btn-lg mt32 mb32" t-att-href="'/crm/%s/contact/edit' %partner.id">Redigera</a></li></t>
                        </ul>
                    </div>
                </div>
            </t>
            <t t-if="mode == 'edit' or mode == 'add'">
                <div class="container mt32 mb32">
                    <form method="post">
                        <div class="form-group">
                            <label for="name">Namn</label>
                            <input name="name" type="text" class="form-control" t-att-value="partner.name if partner else ''" att="{'disabled': '1'} if editable == disable else {}" placeholder="Pelle Svensson" required="1"/>
                        </div>
                        <div class="form-group">
                            <label for="email">Epost</label>
                            <input name="email" type="email" class="form-control" t-att-value="partner.email if partner else ''" att="{'disabled': '1'} if editable == disable else {}" placeholder="exempel@exempel.com"/>
                        </div>
                        <div class="form-group">
                            <label for="phone">Telefon</label>
                            <input name="phone" type="text" class="form-control" t-att-value="partner.phone if partner else ''" att="{'disabled': '1'} if editable == disable else {}" placeholder="0131234567"/>
                        </div>
                        <div class="form-group">
                            <label for="mobile">Mobil</label>
                            <input name="mobile" type="text" class="form-control" t-att-value="partner.mobile if partner else ''" att="{'disabled': '1'} if editable == disable else {}" placeholder="0131234567"/>
                        </div>
                        <div class="form-group">
                            <label for="function">Tjänst</label>
                            <input name="function" type="text" class="form-control" t-att-value="partner.function if partner else ''" att="{'disabled': '1'} if editable == disable else {}" placeholder="Kontakt"/>
                        </div>
                        <div class="container crud_button_group">
                            <ul>
                                <li class="text-center"><a type="button" class="btn btn-default btn-lg mt32 mb32" onclick="return window.history.back();">Avbryt</a></li>
                                <t t-if="mode == 'edit' and editable == 'enable'"><li class="text-center"><a type="button" class="btn btn-danger btn-lg mt32 mb32" t-att-href="'/crm/%s/contact/delete' %partner.id" onclick="return confirm('Är du säker?')">Ta bort</a></li></t>
                                <t t-if="mode == 'add' or (mode == 'edit' and editable == 'enable')"><li class="text-center"><button class="btn btn-warning btn-lg mt32 mb32" name="btn-save" value="btn-save" type="submit">Spara</button></li></t>
                            </ul>
                        </div>
                    </form>
                </div>
            </t>
        </t>
    </template>

    <!-- View Lead Information-->
    <template id="lead_detail" name="Lead Information">
        <t t-call="website.layout">
            <t t-if="mode == 'view'">
                <div class="container mt32 mb32">
                    <table class="col-xs-12 col-sm-12 col-md-12 col-lg-12 customer_card_table">
                        <tr>
                            <td>Namn</td>
                            <td><span t-if="lead.name" t-esc="lead.name" class="pull-right"/></td>
                        </tr>
                        <tr>
                            <td>Kampanj</td>
                            <td><span t-if="lead.campaign" t-esc="lead.campaign.name" class="pull-right"/></td>
                        </tr>
                        <tr>
                            <td>Beskrivning</td>
                            <td><span t-if="lead.description" t-esc="lead.description" class="pull-right"/></td>
                        </tr>
                    </table>
                    <div class="container crud_button_group">
                        <ul>
                            <li class="text-center"><a type="button" class="btn btn-default btn-lg mt32 mb32" onclick="return window.history.back();">Backa</a></li>
                            <li class="text-center"><a type="button" class="btn btn-danger btn-lg mt32 mb32" t-att-href="'/crm/%s/lead/%s/delete' %(partner.id, lead.id)" onclick="return confirm('Är du säker?')">Ta bort</a></li>
                            <li class="text-center"><a type="button" class="btn btn-warning btn-lg mt32 mb32" t-att-href="'/crm/%s/lead/%s/edit' %(partner.id, lead.id)">Redigera</a></li>
                        </ul>
                    </div>
                </div>
            </t>
            <t t-if="mode == 'edit' or mode == 'add'">
                <div class="container mt32 mb32">
                    <form method="post">
                        <div class="form-group">
                            <label for="name">Namn</label>
                            <input name="name" type="text" class="form-control" t-att-value="lead.name if lead else ''" placeholder="Storsäljare" required="1"/>
                        </div>
                        <t t-if="mode == 'add'">
                            <div class="form-group">
                                <label for="name">Kampanj</label>
                                <select name="campaign" id="campaign" class="form-control selectpicker dropdown">
                                    <option value=""></option>
                                    <t t-foreach="request.env['marketing.campaign'].search([])" t-as="c">
                                        <option t-att-value="c.id"><t t-raw="c.name"/></option>
                                    </t>
                                </select>
                            </div>
                        </t>
                        <t t-if="mode == 'edit'">
                            <div class="form-group">
                                <label for="name">Kampanj</label>
                                <select name="campaign" id="campaign" class="form-control selectpicker dropdown">
                                    <option value=""></option>
                                    <t t-foreach="request.env['marketing.campaign'].search([])" t-as="c">
                                        <option t-att-value="c.id" t-att="{'selected': 'checked'} if c.id == lead.campaign.id else {}"><t t-raw="c.name"/></option>
                                    </t>
                                </select>
                            </div>
                        </t>
                        <div class="form-group">
                            <label for="description">Beskrivning</label>
                            <textarea name="description" type="text" class="form-control" placeholder="Beskrivning"><t t-esc="lead.description if lead else ''"/></textarea>
                        </div>
                        <div class="container crud_button_group">
                            <ul>
                                <li class="text-center"><a type="button" class="btn btn-default btn-lg mt32 mb32" onclick="return window.history.back();">Avbryt</a></li>
                                <t t-if="mode == 'edit'"><li class="text-center"><a type="button" class="btn btn-danger btn-lg mt32 mb32" t-att-href="'/crm/%s/lead/%s/delete' %(partner.id, lead.id)" onclick="return confirm('Är du säker?')">Ta bort</a></li></t>
                                <t t-if="mode == 'add' or mode == 'edit'"><li class="text-center"><button class="btn btn-warning btn-lg mt32 mb32" name="btn-save" value="btn-save" type="submit">Spara</button></li></t>
                            </ul>
                        </div>
                    </form>
                </div>
            </t>
        </t>
    </template>

    <!-- View Meeting Information-->
    <template id="meeting_detail" name="Meeting Information">
        <t t-call="website.layout">
            <t t-if="mode == 'view'">
                <div class="container mt32 mb32">
                    <table class="col-xs-12 col-sm-12 col-md-12 col-lg-12 customer_card_table">
                        <tr>
                            <td>Namn</td>
                            <td><span t-field="meeting.name" class="pull-right"/></td>
                        </tr>
                        <tr>
                            <td>Beskrivning</td>
                            <td><span t-esc="meeting.strip_desc()" class="pull-right text-right"/></td>
                        </tr>
                        <tr>
                            <td>Datum</td>
                            <td>
                                <t t-if="meeting.start_date">
                                    <span t-field="meeting.start_date" class="pull-right"/>
                                </t>
                                <t t-if="meeting.start_datetime">
                                    <span t-field="meeting.start_datetime" class="pull-right"/>
                                </t>
                            </td>
                        </tr>
                    </table>
                    <div class="container crud_button_group">
                        <ul>
                            <li class="text-center"><a type="button" class="btn btn-default btn-lg mt32 mb32" onclick="return window.history.back();">Backa</a></li>
                            <li class="text-center"><a type="button" class="btn btn-danger btn-lg mt32 mb32" t-att-href="'/crm/%s/meeting/%s/delete' %(partner.id, meeting.id)" onclick="return confirm('Är du säker?')">Ta bort</a></li>
                            <li class="text-center"><a type="button" class="btn btn-warning btn-lg mt32 mb32" t-att-href="'/crm/%s/meeting/%s/edit' %(partner.id, meeting.id)">Redigera</a></li>
                        </ul>
                    </div>
                </div>
            </t>
            <t t-if="mode == 'edit' or mode == 'add'">
                <div class="container mt32 mb32">
                    <form method="post">
                        <div class="form-group">
                            <lable for="description">Beskrivning</lable>
                            <textarea name="description" type="text" class="form-control input-xs mb16" required="1"><t t-esc="meeting.description if meeting else ''"/></textarea>
                            <div class="form-group">
                                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" style="padding-left: 0px; padding-right: 0px;">
                                    <lable for="meeting_date">Datum</lable>
                                    <input id="meeting_date" name="meeting_date" type="date" class="form-control input-xs mb16" t-att-value="meeting.start[:10] if mode == 'edit' else ''" required="1"/>
                                </div>
                                <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3" style="padding-right: 0px;">
                                    <label for="meeting_time_start" style="display: unset; font-weight: unset;">Starttid</label>
                                    <input name="meeting_time_start" class="form-control input-xs mb16" type="time" t-att-value="website.convert_to_local(meeting.start)[11:] if mode == 'edit' else ''" required="1"/>
                                </div>
                                <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3" style="padding-right: 0px;">
                                    <label for="meeting_time_end" style="display: unset; font-weight: unset;">Sluttid</label>
                                    <input name="meeting_time_end" class="form-control input-xs mb16" type="time" t-att-value="website.convert_to_local(meeting.stop)[11:] if mode == 'edit' else ''" required="1"/>
                                </div>
                            </div>
                        </div>
                        <div class="container crud_button_group">
                            <ul>
                                <li class="text-center"><a type="button" class="btn btn-default btn-lg mt32 mb32" onclick="return window.history.back();">Avbryt</a></li>
                                <t t-if="mode == 'edit'"><li class="text-center"><a type="button" class="btn btn-danger btn-lg mt32 mb32" t-att-href="'/crm/%s/meeting/%s/delete' %(partner.id, meeting.id)" onclick="return confirm('Är du säker?')">Ta bort</a></li></t>
                                <t t-if="mode == 'add' or mode == 'edit'"><li class="text-center"><button class="btn btn-warning btn-lg mt32 mb32" name="btn-save" value="btn-save" type="submit">Spara</button></li></t>
                            </ul>
                        </div>
                    </form>
                </div>
            </t>
        </t>
    </template>

    <!-- View TODO Information-->
    <template id="todo_detail" name="TODO Information">
        <t t-call="website.layout">
            <t t-if="mode == 'view'">
                <div class="container mt32 mb32">
                    <table class="col-xs-12 col-sm-12 col-md-12 col-lg-12 customer_card_table">
                        <tr>
                            <td>Att göra</td>
                            <td><span t-att-id="'note_%s_text' % note.id" t-field="note.memo" t-att-style="'text-decoration: line-through;color: #f00;' if not note.open else ''" class="pull-right"/></td>
                        </tr>
                        <tr>
                            <td>Datum</td>
                            <td>
                                <span t-field="note.due_date" class="pull-right"/>
                            </td>
                        </tr>
                    </table>
                    <div class="container crud_button_group">
                        <ul>
                            <li class="text-center"><a type="button" class="btn btn-default btn-lg btn-primary mt32 mb32" t-att-href="'/crm/%s/note/%s/done' %(partner.id, note.id)">Klar</a></li>
                            <li class="text-center"><a type="button" class="btn btn-default btn-lg mt32 mb32" onclick="return window.history.back();">Backa</a></li>
                            <li class="text-center"><a type="button" class="btn btn-danger btn-lg mt32 mb32" t-att-href="'/crm/%s/note/%s/delete' %(partner.id, note.id)" onclick="return confirm('Är du säker?')" ontouchend="return confirm('Är du säker?')">Ta bort</a></li>
                            <li class="text-center"><a type="button" class="btn btn-warning btn-lg mt32 mb32" t-att-href="'/crm/%s/note/%s/edit' %(partner.id, note.id)">Redigera</a></li>
                        </ul>
                    </div>
                </div>
            </t>
            <t t-if="mode == 'edit' or mode == 'add'">
                <div class="container mt32 mb32">
                    <form method="post">
                        <div class="form-group">
                            <lable for="description">Beskrivning</lable>
                            <textarea name="memo" type="text" class="form-control input-xs mb16" required="1"><t t-esc="memo if memo else ''"/></textarea>
                            <div class="form-group">
                                <div style="padding-right: 0px;">
                                    <label for="due_date" style="display: unset; font-weight: unset;">Datum</label>
                                    <input name="due_date" class="form-control input-xs mb16" type="date" t-att-value="note.due_date if mode == 'edit' else ''" required="1"/>
                                </div>
                            </div>
                        </div>
                        <div class="container crud_button_group">
                            <ul>
                                <li class="text-center"><a type="button" class="btn btn-default btn-lg mt32 mb32" onclick="return window.history.back();">Backa</a></li>
                                <t t-if="mode == 'edit'"><li class="text-center"><a type="button" class="btn btn-danger btn-lg mt32 mb32" t-att-href="'/crm/%s/note/%s/delete' %(partner.id, note.id)" onclick="return confirm('Är du säker?')" ontouchend="return confirm('Är du säker?')">Ta bort</a></li></t>
                                <t t-if="mode == 'add' or mode == 'edit'"><li class="text-center"><button class="btn btn-warning btn-lg mt32 mb32" name="btn-save" value="btn-save" type="submit">Spara</button></li></t>
                            </ul>
                        </div>
                    </form>
                </div>
            </t>
        </t>
    </template>

    <template id="crm_css_js" inherit_id="website.layout">
        <xpath expr="//t[@t-call-assets='website.assets_frontend']" position="after">
            <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400" rel="stylesheet"/>
            <link href="/crm_repord/static/src/css/main.css" rel="stylesheet"/>
        </xpath>
        <xpath expr="//body" position="inside">
            <script src="/crm_repord/static/src/js/main.js" type="text/javascript"/>
        </xpath>
    </template>

    <template id="crm_user_menu" inherit_id="website.layout">
        <xpath expr="//ul[@class='dropdown-menu js_usermenu']/*[1]" position="after">
            <li><a href="/crm/mystores" role="menuitem">Mobilappen</a></li>
        </xpath>
    </template>

    </data>
</openerp>

